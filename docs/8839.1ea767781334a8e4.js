"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8839],{8839:(U,p,c)=>{c.r(p),c.d(p,{DocumentPageModule:()=>J});var h=c(6814),g=c(95),a=c(2303),_=c(5877),m=c(5861),e=c(9468),l=c(553),v=c(3182),f=c(2251),d=c(15),D=c(701),Z=c(7838),x=c(8162);function P(i,r){1&i&&e._UZ(0,"ion-progress-bar",6)}function T(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-card",23)(1,"ion-card-subtitle")(2,"ion-grid",24)(3,"ion-row",25)(4,"ion-col",26)(5,"strong"),e._uU(6,"\xa0GPS:\xa0"),e.qZA()(),e.TgZ(7,"ion-col"),e._uU(8),e._UZ(9,"br"),e.TgZ(10,"small"),e._uU(11,"Latitude"),e.qZA()(),e.TgZ(12,"ion-col"),e._uU(13),e._UZ(14,"br"),e.TgZ(15,"small"),e._uU(16,"Longitude"),e.qZA()(),e.TgZ(17,"ion-col",27),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(3);return e.KtG(o.openMap())}),e._UZ(18,"ion-icon",28),e.qZA()()()()()}if(2&i){const n=e.oxw(3);e.xp6(8),e.Oqu(n.document.geolocation.split(",")[0]),e.xp6(5),e.Oqu(n.document.geolocation.split(",")[1])}}function M(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-col")(1,"ion-button",13),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(3);return e.KtG(o.reloadDocument())}),e._uU(2,"Recarregar"),e.qZA()()}}function w(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"div")(1,"ion-card"),e._UZ(2,"ion-img",9),e.TgZ(3,"ion-card-content",2)(4,"ion-grid",10)(5,"ion-row")(6,"ion-col")(7,"ion-button",11),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.getPhoto("new"))}),e._UZ(8,"ion-icon",12),e._uU(9,"C\xe2mera "),e.qZA()(),e.TgZ(10,"ion-col")(11,"ion-button",13),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.getPhoto("reset"))}),e._UZ(12,"ion-icon",14),e._uU(13,"Padr\xe3o "),e.qZA()()()()()(),e.TgZ(14,"div",15)(15,"p")(16,"ion-input",16),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw(2);return e.KtG(s.document.name=o)})("ionInput",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.change())}),e.qZA()(),e.TgZ(17,"p")(18,"ion-textarea",17),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw(2);return e.KtG(s.document.description=o)})("ionInput",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.change())}),e.qZA()(),e.TgZ(19,"p")(20,"ion-input",18),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw(2);return e.KtG(s.document.location=o)})("ionInput",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.change())}),e.qZA()(),e.TgZ(21,"p")(22,"ion-toggle",19),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw(2);return e.KtG(s.pageGPS=o)})("ionChange",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.toggleGPS())}),e._uU(23,"Adicionar GPS na localiza\xe7\xe3o."),e.qZA()(),e.YNc(24,T,19,2,"ion-card",20),e.qZA(),e.TgZ(25,"ion-grid")(26,"ion-row"),e.YNc(27,M,3,0,"ion-col",8),e.TgZ(28,"ion-col",21)(29,"ion-button",22),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.saveDocument())}),e._uU(30,"Salvar"),e.qZA()()()()()}if(2&i){const n=e.oxw(2);e.xp6(2),e.Q6J("src",n.document.image)("alt",n.document.name),e.xp6(14),e.Q6J("ngModel",n.document.name),e.xp6(2),e.Q6J("ngModel",n.document.description),e.xp6(2),e.Q6J("ngModel",n.document.location),e.xp6(2),e.Q6J("checked",!0)("ngModel",n.pageGPS),e.xp6(2),e.Q6J("ngIf",n.capacitorGPS&&n.pageGPS&&""!=n.document.geolocation),e.xp6(3),e.Q6J("ngIf",n.docEdit),e.xp6(2),e.Q6J("disabled",n.pageBtnDisabled)}}function C(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-col")(1,"ion-button",32),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(3);return e.KtG(o.reload())}),e._UZ(2,"ion-icon",33),e._uU(3,"Novo"),e.qZA()()}}function b(i,r){if(1&i&&(e.TgZ(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e._uU(4,"Oba!"),e.qZA()(),e.TgZ(5,"ion-card-content"),e._uU(6),e.TgZ(7,"ion-grid",29)(8,"ion-row"),e.YNc(9,C,4,0,"ion-col",8),e.TgZ(10,"ion-col")(11,"ion-button",30),e._UZ(12,"ion-icon",31),e._uU(13,"Listagem"),e.qZA()()()()()()()),2&i){const n=e.oxw(2);e.xp6(6),e.hij(" ",n.pageMessage," "),e.xp6(3),e.Q6J("ngIf",!n.docEdit)}}function G(i,r){if(1&i&&(e.TgZ(0,"ion-content",7),e.YNc(1,w,31,10,"div",8),e.YNc(2,b,14,2,"div",8),e.qZA()),2&i){const n=e.oxw();e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",!n.pageSended),e.xp6(1),e.Q6J("ngIf",n.pageSended)}}const I=[{path:"",component:(()=>{var i;class r{constructor(){this.app=(0,v.ZF)(l.N.firebase),this.auth=(0,f.v0)(this.app),this.db=(0,d.ad)(this.app),this.router=(0,e.f3M)(_.F0),this.activatedRoute=(0,e.f3M)(_.gz),this.alertController=(0,e.f3M)(a.Br),this.tools=(0,e.f3M)(D.G),this.userId="",this.docId="",this.docEdit=!1,this.pageTitle="",this.pageView=!1,this.pageGPS=!1,this.pageBtnDisabled=!0,this.pageSended=!1,this.pageMessage="",this.capacitorImageFormat=""}ngOnInit(){(0,f.Aj)(this.auth,t=>{t?this.userId=t.uid:this.router.navigate(["/login"])}),this.docId=this.activatedRoute.snapshot.paramMap.get("id"),this.getGPS(),this.docId?(this.docEdit=!0,this.pageTitle="Editar Documento",this.getDocument()):(this.docEdit=!1,this.pageTitle="Novo Documento",this.newDocument())}getDocument(){var t=this;return(0,m.Z)(function*(){t.docRef=(0,d.JU)(t.db,l.N.dbCollection,t.docId);const o=yield(0,d.QT)(t.docRef);var u;o.exists()?(t.document=o.data(),t.pageGPS=""!=t.document.geolocation,t.pageView=!0,t.pageBtnDisabled=!1):yield(yield t.alertController.create({header:"Oooops!",message:"Documento n\xe3o encontrado...",buttons:[{text:"OK",handler:(u=(0,m.Z)(function*(){t.router.navigate(["/"])}),function(){return u.apply(this,arguments)})}]})).present()})()}newDocument(){this.document={date:"",name:"",description:"",image:l.N.dbDefaultImage,location:"",geolocation:"",owner:"",views:0,status:"on"},this.pageView=!0}getPhoto(t){var o=this;"new"==t?x.V1.getPhoto({quality:20,allowEditing:!0,width:640,height:640,resultType:x.dk.DataUrl}).then(function(){var s=(0,m.Z)(function*(u){l.N.dbImageFormats.includes(u.format)?(o.document.image=u.dataUrl+"",o.capacitorImageFormat=u.format):yield(yield o.alertController.create({header:"Oooops!",message:"Formato de imagem n\xe3o suportado! Use somente "+l.N.dbImageFormats.join(", ")+".",buttons:["OK"]})).present()});return function(u){return s.apply(this,arguments)}}()):this.document.image=l.N.dbDefaultImage}getGPS(){Z.b.getCurrentPosition().then(t=>{this.capacitorGPS=`${t.coords.latitude}, ${t.coords.longitude}`})}change(){this.pageBtnDisabled=!(this.tools.stripTags(this.document.name).length>2&&this.tools.stripTags(this.document.description).length>4&&this.tools.stripTags(this.document.location).length>3)}toggleGPS(){this.document.geolocation=this.pageGPS?this.capacitorGPS:""}reloadDocument(){var t=this;return(0,m.Z)(function*(){var s;yield(yield t.alertController.create({header:"Oooops!",message:"As altera\xe7\xf5es j\xe1 feitas no documento, que n\xe3o foram salvas, ser\xe3o perdidas...",buttons:[{text:"Cancelar",role:"cancel"},{text:"OK",role:"confirm",handler:(s=(0,m.Z)(function*(){t.getDocument()}),function(){return s.apply(this,arguments)})}]})).present()})()}openMap(){window.open(`https://www.google.com/maps?q=${this.document.geolocation}`,"blank")}saveDocument(){if(this.pageBtnDisabled=!0,this.pageView=!1,this.docEdit)(0,d.r7)(this.docRef,this.document).then(()=>{this.pageSended=!0,this.pageView=!0,this.pageMessage="Documento atualizado com sucesso!"});else{const t=(0,d.hJ)(this.db,l.N.dbCollection);this.document.date=this.tools.now(),this.document.owner=this.userId,(0,d.ET)(t,this.document).then(o=>{this.pageSended=!0,this.pageView=!0,this.pageMessage="Documento criado com sucesso!"})}}reload(){this.pageSended=!1,this.pageView=!0,this.newDocument()}}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-document"]],decls:9,vars:4,consts:[[3,"translucent"],["slot","start"],[1,"ion-text-center"],["ios","document-outline","md","document-sharp","slot","end",1,"ion-padding"],["type","indeterminate",4,"ngIf"],[3,"fullscreen",4,"ngIf"],["type","indeterminate"],[3,"fullscreen"],[4,"ngIf"],[3,"src","alt"],[1,"ion-no-padding"],["color","success",3,"click"],["ios","camera-outline","md","camera-sharp","slot","start"],["color","warning",3,"click"],["ios","refresh-outline","md","refresh-sharp","slot","start"],[1,"ion-padding-start","ion-padding-end"],["label","Nome:","type","text","name","name","labelPlacement","floating","fill","outline","placeholder","Digite o nome do item.","errorText","Nome inv\xe1lido.","required","","minlength","3",3,"ngModel","ngModelChange","ionInput"],["label","Descri\xe7\xe3o:","name","description","labelPlacement","floating","fill","outline","placeholder","Digite a descri\xe7\xe3o.","errorText","Descri\xe7\xe3o inv\xe1lida.","required","","minlength","5","autoGrow","true",3,"ngModel","ngModelChange","ionInput"],["label","Localiza\xe7\xe3o:","type","text","name","location","labelPlacement","floating","fill","outline","placeholder","Digite a localiza\xe7\xe3o do item.","errorText","Localiza\xe7\xe3o inv\xe1lida.","required","","minlength","3",3,"ngModel","ngModelChange","ionInput"],["labelPlacement","end",3,"checked","ngModel","ngModelChange","ionChange"],["class","ion-text-center ion-no-margin",4,"ngIf"],[1,"ion-text-end"],[3,"disabled","click"],[1,"ion-text-center","ion-no-margin"],[1,"ion-no-padding","ion-no-margin","ion-text-center"],[1,"ion-align-items-center"],["size","auto"],["size","auto",1,"ion-padding-start","ion-padding-end",3,"click"],["ios","eye-outline","md","eye-sharp",2,"color","steelblue","cursor","pointer"],[1,"ion-no-padding","ion-margin-top"],["routerLink","/"],["ios","home-outline","md","home-sharp","slot","start"],[3,"click"],["ios","add-circle-outline","md","add-circle-sharp","slot","start"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",2),e._uU(5),e.qZA(),e._UZ(6,"ion-icon",3),e.YNc(7,P,1,0,"ion-progress-bar",4),e.qZA()(),e.YNc(8,G,3,3,"ion-content",5)),2&t&&(e.Q6J("translucent",!0),e.xp6(5),e.Oqu(o.pageTitle),e.xp6(2),e.Q6J("ngIf",!o.pageView),e.xp6(1),e.Q6J("ngIf",o.pageView))},dependencies:[h.O5,g.JJ,g.Q7,g.wO,g.On,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.wI,a.W2,a.jY,a.Gu,a.gu,a.Xz,a.pK,a.fG,a.X7,a.Nd,a.g2,a.wd,a.ho,a.sr,a.w,a.j9,a.YI,_.rH]}),r})()}];let E=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.Bz.forChild(I),_.Bz]}),r})(),J=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,g.u5,a.Pc,E]}),r})()}}]);